<div class="main">

  <div class="main__toolbar">
    <div class="container-fluid">
      <div class="row">
        <div class="col-lg main__toolbar__var" ng-repeat="risk in $ctrl.game.risks">
          {{ risk.label }}: {{ risk.value }}
        </div>
      </div>
    </div>
  </div>

  <div class="main__debug small">
    <div class="row">
      <div class="main__debug__vars col-sm-4">
        <table class="table table-striped table-sm">
          <thead class="thead-inverse">
            <tr>
              <th style="width: 40%">Label</th>
              <th>Category</th>
              <th>Value</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="var in $ctrl.game.vars">
              <td>
                {{ var.label }}
              </td>
              <td>
                {{ var.category }}
              </td>
              <td>
                {{ var.value }}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="main__debug__journey card card-block col-sm-8">
        <ol>
          <li ng-repeat="step in $ctrl.game.journey">
            {{ step.text }}
            <div ng-if="step.selection">
              ↪️ <span class="badge badge-default">{{ step.selection.text }}</span>
            </div>
          </li>
        </ol>
        <div ng-if="$ctrl.game.isOver()" class="alert alert-danger">
          Game over: <span class="badge badge-danger" ng-repeat="var in $ctrl.game.consequences">{{ var }}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="main__steps">
    <div class="main__steps__item card card-block" ng-repeat="step in $ctrl.game.steps | filter:$ctrl.game.isCurrent">
      <div>
        <span class="badge badge-info">{{ step.year }}</span>
      </div>
      <p>{{ step.text }}</p>
      <ul class="list-unstyled row">
        <li class="col-lg my-1" ng-repeat="choice in step.choices">
          <button class="btn btn-block btn-primary" ng-click="step.select(choice)">
            {{ choice.text }}
          </button>
        </li>
      </ul>
    </div>
  </div>

  <div class="main__feedback" ng-if="$ctrl.showFeedback">
    <div class="main__feedback__overlay" ng-click="$ctrl.showFeedback = false"></div>
    <div class="main__feedback__card card card-block">
      <p class="lead">{{ $ctrl.game.feedback }}</p>
      <div class="text-right">
        <button class="btn btn-primary" ng-click="$ctrl.showFeedback = false">
          Got it!
        </button>
      </div>
    </div>
  </div>

</div>
